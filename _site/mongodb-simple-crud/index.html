<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>mongodb简单CRUD | Siberiawolf的小窝</title>
    <meta name="author" content="Siberiawolf" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Siberiawolf的小窝" />
    <meta name="keywords" content="Siberiawolf的小窝,siberiawolf,siberiawolf0307">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/" style="color:#fff;">Siberiawolf</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="https://github.com/siberiawolf" target="_blank">
                <div class="github"></div>
            </a>
            <a href="http://weibo.com/siberiawolf0307/" target="_blank">
                <div class="weibo"></div>
            </a>
            <a href="https://twitter.com/siberiawolf0307" target="_blank">
                <div class="twitter"></div>
            </a>
            <a href="https://www.facebook.com/siberiawolf0307" target="_blank">
                <div class="facebook"></div>
            </a>
        </div>
    </div>

    <link rel="stylesheet" href="http://siberiawolf.qiniudn.com/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <!-- 文章内容 start -->
    <div class="entry">
        <h1 class="entry-title"><a href="/mongodb-simple-crud" title="mongodb简单CRUD">mongodb简单CRUD</a></h1>
        <p class="entry-date">2014-06-25</p>
        <h2>创建db文件夹</h2>

<p>启动之前，我们要给mongodb指定一个文件夹，这里取名为”db",用来存放mongodb的数据。
我本地目录：</p>

<pre><code>D:\ProgramFiles\mongodb\db
</code></pre>

<h2>指定db文件夹位置</h2>

<p>首先需要进入到db文件夹，然后通过--dbpath制定</p>

<pre><code>C:\Users\Administrator&gt;d:

D:\&gt;cd ProgramFiles\mongodb\bin

D:\ProgramFiles\mongodb\bin&gt;mongod --dbpath=d:\ProgramFiles\mongodb\db
</code></pre>

<h2>测试</h2>

<p>通过通过控制台可以看到本地端口：27017</p>

<p><strong>启动信息</strong></p>

<pre><code>MongoDB starting : pid=2748 port=27017 dbpath=d:\ProgramFiles\mongodb\db 64-bit host=wolf-PC
</code></pre>

<p><strong>测试连接</strong></p>

<pre><code>http://localhost:27017/
</code></pre>

<p><strong>测试结果</strong></p>

<pre><code>It looks like you are trying to access MongoDB over HTTP on the native driver port.
</code></pre>

<p>如果页面中显示上面的信息，说明mongodb启动成功~</p>

<h1>基本操作</h1>

<p>通过mongo命令启动一个cmd shell，这个shell其实就mongodb客户端，同时也是一个<strong>js的编辑器</strong>。启动完mongdodb后，默认连接的数据库是<strong>"test"</strong>
<strong>启动shell</strong>
重新打开一个cmdshell，输入如下命令</p>

<pre><code>C:\Users\Administrator&gt;d:

D:\&gt;cd d:ProgramFiles\mongodb\bin

D:\ProgramFiles\mongodb\bin&gt;mongo
</code></pre>

<p>然后通过连接信息，可以看到连接的数据库为test</p>

<pre><code>MongoDB shell version: 2.6.1
connecting to: test
</code></pre>

<h2>添加</h2>

<p>mongodb中文档是json的扩展（BSON），所以增删改的操作，就通过json的方式添加。下面代码向person集合（collections）中添加一条数据，而一个集合，就类似关系型数据库中的table.</p>

<pre><code>&gt; db.person.insert({"name" : "peter","age" : 23})
WriteResult({ "nInserted" : 1 })
</code></pre>

<h2>删除</h2>

<p>mongodb中可以使用remove删除一个或全部集合，但是不会删除索引，可以使用drop既删除集合，也可以删除索引</p>

<pre><code>&gt; db.person.remove({name:'tom'})
&gt; db.person.remove({})
</code></pre>

<p>删除一条数据，可以传递一个对象，对象中的属性就是要删除的数据，而且因为支持JS编辑所以，我删除的时候，属性没有使用双引号，也会正常删除数据
如果要删除全部数据，可以传递一个空的对象</p>

<h2>修改</h2>

<p>修改的方法需要传递两个参数，第一个参数是查找的条件，第二个参数是要修改的内容</p>

<pre><code>&gt; db.person.update({"name" : "peter"},{"name" : "tom"})
WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
</code></pre>

<h2>查找</h2>

<p>查找使用find()方法，通过BSON传递要查找的条件，如果什么都不传递，就是查找全部</p>

<pre><code>&gt; db.person.find()
{ "_id" : ObjectId("53aae7211943938aa643c4e9"), "name" : "tom" }
&gt; db.person.find({"name" : "tom"})
{ "_id" : ObjectId("53aae7211943938aa643c4e9"), "name" : "tom" }
</code></pre>

<p>其中_id是mongodb默认添加的唯一标识</p>

        <div id="disqus_container">
            <a href="javascript:void(0);" onclick="toggleDuoshuoComments('#comment-box', 'mongodb简单CRUD', 'http://siberiawolf.com//mongodb-simple-crud');">点击查看评论</a>
            <div id="comment-box"></div>
        </div>        
    </div>
    <!-- 文章内容 end -->

    <!-- 微博关注 start -->
    <div class="sidenav">

        <iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=2313100327&verifier=d53cef72&dpc=1"></iframe>
    </div>
    <!-- 微博关注 end -->

    <!-- 文章目录 start -->
    <div class="sidenav">
        <h2>技术</h2>
        <ul class="artical-list">
        
            <li><a href="/personal-technology-growth">WEB前端开发资料索引</a></li>
        
            <li><a href="/zepto">Zepto.js使用</a></li>
        
            <li><a href="/mongodb-simple-crud">mongodb简单CRUD</a></li>
        
            <li><a href="/github-pages">使用Github Pages建独立博客（二）</a></li>
        
            <li><a href="/beiyuu-github-pages">使用Github Pages建独立博客（一）</a></li>
        
        </ul>
        
        <h2>生活</h2>
        <ul class="artical-list">
        
            <li><a href="/snowboarding-course">单板滑雪教程</a></li>
        
        </ul>

        <h2>项目</h2>
        <ul class="artical-list">
            <li><a href="/free_programming/index.html">免费的编程中文书籍索引</a></li>
            <li><a href="/frontend_knowledge/index.html">前端知识结构图</a></li>
        </ul>
    </div>
    <!-- 文章目录 end -->
	
	<!-- jd推广 start -->
	
    <div class="sidenav">
        <script type="text/javascript">var jd_union_pid="220524208";var jd_union_euid="";</script>
        <script type="text/javascript" src="http://ads.union.jd.com/static/js/union.js"></script>        
    </div>
    
    <!-- jd推广 end -->
</div>
<div id="footer">
    <p>
        <a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备14051142号</a>，版权所有 © 2014 
        <a href="http://siberiawolf.com/" target="_blank">Siberiawolf的小窝</a>。
        感谢<a href="https://pages.github.com/" target="_blank">GitHub Pages</a>开源技术。
        感谢<a href="https://portal.qiniu.com/signup?code=3l8fij4ieuvrm" target="_blank">七牛云存储</a>提供静态资源空间。
        本站代码地址在<a href="https://github.com/siberiawolf/siberiawolf.github.io" target="_blank">这里</a>
    </p>
</div>
<script src="http://libs.baidu.com/jquery/1.7.1/jquery.min.js"></script>
<!-- 多说公共JS代码 start -->
<script>var duoshuoQuery = {short_name:"siberiawolf"};</script>
<script src="http://static.duoshuo.com/embed.js"></script>
<script type="text/javascript">
function toggleDuoshuoComments(container, id, url){
  if(jQuery(container).has("div").length>0){
    jQuery(container).empty();
    return;
  }
  var el = document.createElement('div');
  el.setAttribute('data-thread-key', id);
  el.setAttribute('data-url', url);
  DUOSHUO.EmbedThread(el);
  jQuery(container).append(el);
}
</script>
<!-- 多说公共JS代码 end -->


    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){        // 左侧悬浮点击      
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').hide();
                }else{
                    $('.home-contact').show();
                }
            });
        });
    </script>
    <!-- 百度统计代码 start -->
    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1248d51f06841e8dda82405c280d6597' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <!-- 百度统计代码 end -->
</body>
</html>
