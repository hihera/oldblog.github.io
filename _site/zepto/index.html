<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Zepto.js使用 | Siberiawolf的小窝</title>
    <meta name="author" content="Siberiawolf" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Siberiawolf的小窝" />
    <meta name="keywords" content="Siberiawolf的小窝,siberiawolf,siberiawolf0307">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/" style="color:#fff;">Siberiawolf</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="https://github.com/siberiawolf" target="_blank">
                <div class="github"></div>
            </a>
            <a href="http://weibo.com/siberiawolf0307/" target="_blank">
                <div class="weibo"></div>
            </a>
            <a href="https://twitter.com/siberiawolf0307" target="_blank">
                <div class="twitter"></div>
            </a>
            <a href="https://www.facebook.com/siberiawolf0307" target="_blank">
                <div class="facebook"></div>
            </a>
        </div>
    </div>

    <link rel="stylesheet" href="http://siberiawolf.qiniudn.com/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <!-- 文章内容 start -->
    <div class="entry">
        <h1 class="entry-title"><a href="/zepto" title="Zepto.js使用">Zepto.js使用</a></h1>
        <p class="entry-date">2014-07-15</p>
        <h2>介绍</h2>

<blockquote><p>Zepto is a minimalist JavaScript library for modern browsers with a largely jQuery-compatible API. If you use jQuery, you already know how to use Zepto.</p>

<p>While 100% jQuery coverage is not a design goal, the APIs provided match their jQuery counterparts. The goal is to have a ~5-10k modular library that downloads and executes fast, with a familiar and versatile API, so you can concentrate on getting stuff done.</p></blockquote>

<p>主要意思就是说：
Zepto是一个轻量级的针对现代高级浏览器的JavaScript库， 它与jquery有着类似的api。 如果你会用jquery，那么你也会用zepto。</p>

<p>设计的目的是提供jquery的类似的APIs，但并不是100%覆盖jquery为目的。zepto设计的目的是有一个5-10k的通用库、下载并执行快、有一个熟悉通用的API，所以你能把你主要的精力放到应用开发上。</p>

<h2>下载Zepto</h2>

<p>Zepto 1.14源码中有 17 个模块，而官网提供的标准版里面只有 5 个模块！而且居然不包含对移动端开发非常重要的 touch 模块（提供对触摸事件的支持）！
所以我的建议是，不要从官网下载，而是从 <a href="https://github.com/madrobby/zepto">Github</a> 下载了源代码之后自己 Build 一个版本，这样你可以自行挑选适合的模块。</p>

<p><strong>说明：</strong></p>

<ol>
<li><a href="http://zeptojs.com/">官网</a>上面分别提供了压缩和非压缩的两个版本，这两个版本就只包含了上面说的5个模块。要是需要跟多模块，需要到<a href="https://github.com/madrobby/zepto">Github</a>上自己去下载。</li>
<li>默认的5个模块分别是：zepto、event、ajax、form、ie</li>
<li>如果需要支持IE9以下版本，还是使用jQuery吧。兼容代码可以按照如下方式写：</li>
</ol>


<pre><code>    document.write('&lt;script src='+ ('__proto__' in        {} ? 'zepto' :        'jquery') +        '.js&gt;&lt;\/script&gt;')
</code></pre>

<p>在低版本中自动切换到jQuery.js</p>

<h2>浏览器支持</h2>

<p>具体支持的浏览器版本号，可以直接从<a href="http://zeptojs.com/">官网</a>上面查询得到。</p>

<p>需要注意的是Zepto的一些可选功能是专门针对移动端浏览器的；因为它的最初目标在移动端提供一个精简的类似jquery的js库。</p>

<p>总之，除了ie浏览器外 (&lt;10)，Zepto支持所有的现代浏览器和类似浏览器的环境中工作。</p>

<h2>手动创建Zepto</h2>

<p>zepto和大多数js库文件一样提供两种js文件：jszepto.js和zepto.min.js。 然而，为了更好的程序效果和自由性，可以在使用Zepto源码构建Zepto.js和zepto.min.js的时候选择模块并作测试。 使用<a href="https://github.com/mishoo/UglifyJS">UglifyJS</a>根据你的需要来生成(当服务端开启gzipped后，最精简的代码)代码。</p>

<p>也就是说，我们可以根据实际需求自由选择zepto包括哪些模块。</p>

<p>关于如何定制Zepto的说明：<a href="https://github.com/madrobby/zepto#readme">the README</a>。由于上面给出的连接内容不够详细，我将内容整理到下方。</p>

<p>首先需要下载、安装<a href="http://nodejs.org/">NodeJS</a>。NodeJS跟安装软件一样，点击下一步即可。成功安装后，打开cmd命令窗口，输入node -v如果看到node的版本号，就说明node安装成功了。</p>

<p>然后去官网下载zepto全部的代码，<a href="https://github.com/madrobby/zepto/archive/master.zip">下载地址</a>，随便解压到一个盘符下面即可。用编辑器打开目录中的make文件，找到第42行代码，将需要添加的模块追加到字符串中即可。例如这里追加touch模块。</p>

<pre><code>modules = (env['MODULES'] || 'zepto event ajax form ie touch').split(' ')
</code></pre>

<p>然后切换回cmd中，进入到解压zepto目录的文件夹中。依次执行如下两条命令：</p>

<pre><code>npm install
npm run-script dist
</code></pre>

<p>期间，等待若干时间，最后如果没有出现任何错误，说明文件生成成功了。</p>

<p>打开dist文件夹可以看到生成了三个文件，如下图：
<img src="http://siberiawolf.qiniudn.com/images/zepto/QQ%E6%88%AA%E5%9B%BE20140715182838.png" alt="生成图片" /></p>

<p>开发的时候使用zepto.js，上线的时候使用zepto.min.js。</p>

<p><strong>说明</strong></p>

<p>我之前以为手动将需要的模块添加到文件中，如果需要压缩，直接用压缩工具不就行了吗？
通过下面没有被压缩的代码，可以证明我的猜测。
<img src="http://siberiawolf.qiniudn.com/images/zepto/QQ%E6%88%AA%E5%9B%BE20140715185152.png" alt="未压缩js" /></p>

<p>实际上通过上面的命令(npm run-script dist)，使用了<a href="https://github.com/mishoo/UglifyJS">UglifyJS</a>进行压缩。而非是简单的合并、压缩。通过上面图片中文件的大小可以证明通过npm命令生成的压缩文件多么的小巧。</p>

        <div id="disqus_container">
            <a href="javascript:void(0);" onclick="toggleDuoshuoComments('#comment-box', 'Zepto.js使用', 'http://siberiawolf.com//zepto');">点击查看评论</a>
            <div id="comment-box"></div>
        </div>        
    </div>
    <!-- 文章内容 end -->

    <!-- 微博关注 start -->
    <div class="sidenav">

        <iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=2313100327&verifier=d53cef72&dpc=1"></iframe>
    </div>
    <!-- 微博关注 end -->

    <!-- 文章目录 start -->
    <div class="sidenav">
        <h2>技术</h2>
        <ul class="artical-list">
        
            <li><a href="/personal-technology-growth">WEB前端开发资料索引</a></li>
        
            <li><a href="/zepto">Zepto.js使用</a></li>
        
            <li><a href="/mongodb-simple-crud">mongodb简单CRUD</a></li>
        
            <li><a href="/github-pages">使用Github Pages建独立博客（二）</a></li>
        
            <li><a href="/beiyuu-github-pages">使用Github Pages建独立博客（一）</a></li>
        
        </ul>
        
        <h2>生活</h2>
        <ul class="artical-list">
        
            <li><a href="/snowboarding-course">单板滑雪教程</a></li>
        
        </ul>

        <h2>项目</h2>
        <ul class="artical-list">
            <li><a href="/free_programming/index.html">免费的编程中文书籍索引</a></li>
            <li><a href="/frontend_knowledge/index.html">前端知识结构图</a></li>
        </ul>
    </div>
    <!-- 文章目录 end -->
	
	<!-- jd推广 start -->
	
    <div class="sidenav">
        <script type="text/javascript">var jd_union_pid="220517260";var jd_union_euid="";</script>
        <script type="text/javascript" src="http://ads.union.jd.com/static/js/union.js"></script>        
    </div>
    
    <!-- jd推广 end -->
</div>
<div id="footer">
    <p>
        <a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备14051142号</a>，版权所有 © 2014 
        <a href="http://siberiawolf.com/" target="_blank">Siberiawolf的小窝</a>。
        感谢<a href="https://pages.github.com/" target="_blank">GitHub Pages</a>开源技术。
        感谢<a href="https://portal.qiniu.com/signup?code=3l8fij4ieuvrm" target="_blank">七牛云存储</a>提供静态资源空间。
        本站代码地址在<a href="https://github.com/siberiawolf/siberiawolf.github.io" target="_blank">这里</a>
    </p>
</div>
<script src="http://libs.baidu.com/jquery/1.7.1/jquery.min.js"></script>
<!-- 多说公共JS代码 start -->
<script>var duoshuoQuery = {short_name:"siberiawolf"};</script>
<script src="http://static.duoshuo.com/embed.js"></script>
<script type="text/javascript">
function toggleDuoshuoComments(container, id, url){
  if(jQuery(container).has("div").length>0){
    jQuery(container).empty();
    return;
  }
  var el = document.createElement('div');
  el.setAttribute('data-thread-key', id);
  el.setAttribute('data-url', url);
  DUOSHUO.EmbedThread(el);
  jQuery(container).append(el);
}
</script>
<!-- 多说公共JS代码 end -->


    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){        // 左侧悬浮点击      
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').hide();
                }else{
                    $('.home-contact').show();
                }
            });
        });
    </script>
    <!-- 百度统计代码 start -->
    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1248d51f06841e8dda82405c280d6597' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <!-- 百度统计代码 end -->
</body>
</html>
