<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>使用Github Pages建独立博客（二） | Siberiawolf的小窝</title>
    <meta name="author" content="Siberiawolf" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Siberiawolf的小窝" />
    <meta name="keywords" content="Siberiawolf的小窝,siberiawolf,siberiawolf0307">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/" style="color:#fff;">Siberiawolf</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="https://github.com/siberiawolf" target="_blank">
                <div class="github"></div>
            </a>
            <a href="http://weibo.com/siberiawolf0307/" target="_blank">
                <div class="weibo"></div>
            </a>
            <a href="https://twitter.com/siberiawolf0307" target="_blank">
                <div class="twitter"></div>
            </a>
            <a href="https://www.facebook.com/siberiawolf0307" target="_blank">
                <div class="facebook"></div>
            </a>
        </div>
    </div>

    <link rel="stylesheet" href="http://siberiawolf.qiniudn.com/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <!-- 文章内容 start -->
    <div class="entry">
        <h1 class="entry-title"><a href="/github-pages" title="使用Github Pages建独立博客（二）">使用Github Pages建独立博客（二）</a></h1>
        <p class="entry-date">2014-04-06</p>
        <p>虽然已经有了<a href="http://beiyuu.com" title="BeiYuu">BeiYuu</a>的搭建博客教程，一步一步跟着做，我还是遇到了很多的问题。整理如下：</p>

<h2>Github Pages的特点</h2>

<h4>优点</h4>

<ol>
<li>轻量级的博客系统，没有麻烦的配置</li>
<li>使用标记语言，比如<a href="http://markdown.tw/" title="Markdown语法">Markdown语法</a></li>
<li>无需自己搭建服务器</li>
<li>根据Github的限制，对应的每个站都有空间限制</li>
<li>可以绑定自己的域名</li>
</ol>


<h4>缺点</h4>

<ol>
<li>使用<a href="http://jekyllrb.com/" title="Jekyll">Jekyll</a>模板系统，相当于静态页发布，适合博客，文档介绍等。</li>
<li>动态程序的部分相当局限，比如没有评论，不过还好我们有解决方案。</li>
<li>基于<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" title="Git教程">Git教程</a>，很多东西需要动手，不像Wordpress有强大的后台</li>
</ol>


<h2>学习Git</h2>

<h3>Git简介</h3>

<ol>
<li>Git是目前世界上最先进的分布式版本控制系统（没有之一）。</li>
<li>Git有什么特点？简单来说就是：高端大气上档次。</li>
</ol>


<h3>安装GIt</h3>

<p>Windows下要使用很多Linux/Unix的工具时，需要Cygwin这样的模拟环境，Git也一样。Cygwin的安装和配置都比较复杂，就不建议你折腾了。不过，有高人已经把模拟环境和Git都打包好了，名叫msysgit，只需要下载一个单独的exe安装程序，其他什么也不用装，绝对好用。</p>

<p>msysgit是Windows版的Git，从http://msysgit.github.io/下载，然后按默认选项安装即可。
安装完成后，在开始菜单里找到“Git”->“Git Bash”，蹦出一个类似命令行窗口的东西，就说明Git安装成功！</p>

<h2>为github添加SSH key</h2>

<h3>生成SSH key</h3>

<pre><code>$ ssh-keygen -t rsa -C "youremail@example.com"
</code></pre>

<p>然后一路点击回车即可。如果一切顺利的话，可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥，可以放心地告诉任何人。
查看id_rsa.pub有两种方式:<br/>
1.windows7下看生成的文件</p>

<pre><code>C:\Users\username\.ssh\id_rsa.pub
</code></pre>

<p>2.通过vim命令查看</p>

<pre><code>vim ~/.ssh/id_rsa.pub
</code></pre>

<p>然后将生成的key拷贝到Github Pages中。</p>

<h3>测试连接</h3>

<pre><code>$ ssh -T git@github.com  
</code></pre>

<p>如果提示如下内容表示添加SSH key 成功</p>

<pre><code>Hi yourusername! You've successfully authenticated, but GitHub does not provide shell access.  
</code></pre>

<h2>学习Markdown</h2>

<p><a href="http://markdown.tw/" title="Markdown语法">Markdown语法</a>比较简单，我这里使用的是在线编辑器<a href="https://www.zybuluo.com/mdeditor">Cmd Markdown</a>。在这个编辑器中，可以通过ctrl+alt+H方式查看Markdown语法。</p>

<h2>学习Jekyll</h2>

<p>这里耽误最多时间的就是学习Jekyll了。尤其是搭建本地Jekyll的时候。我的环境是windows 7 64 bit，而Jekyll官网上面并没有支持这个版本，所以我遇到了不少问题。</p>

<p><a href="http://jekyllrb.com/" title="Jekyll">Jekyll</a>（发音/'dʒiːk əl/，"杰克尔"）是一个静态站点生成器，它会根据网页源码生成静态文件。它提供了模板、变量、插件等功能，所以实际上可以用来编写整个网站。
整个思路到这里就很明显了。你先在本地编写符合Jekyll规范的网站源码，然后上传到github，由github生成并托管整个网站。</p>

<h4>优点：</h4>

<ol>
<li>免费，无限流量</li>
<li>享受git的版本管理功能，不用担心文章遗失。</li>
<li>你只要用自己喜欢的编辑器写文章就可以了，其他事情一概不用操心，都由github处理。</li>
</ol>


<h4>缺点：</h4>

<ol>
<li>有一定技术门槛，你必须要懂一点git和网页开发。</li>
<li>它生成的是静态网页，添加动态功能必须使用外部服务，比如评论功能就只能用disqus。</li>
<li>它不适合大型网站，因为没有用到数据库，每运行一次都必须遍历全部的文本文件，网站越大，生成时间越长。　</li>
</ol>


<h3>为何要使用静态网站生成器？</h3>

<p>  不同于 WordPress 这类博客平台（以及其他众多流行的CMS内容管理系统）在服务器端执行PHP等语言的动态框架、访问SQL数据库并动态产生Web页面的工作方式，静态网站生成器的原理十分简单：将所有的页面、布局和帖子集合在一起，预先生成静态的站点。对于动态内容并非必要的站点——例如个人博客，静态网站生成器这样做有几个明显的优势：</p>

<h4>1.快速访问和弱服务器需求</h4>

<p>  静态HTML页面的载入速度理所当然地更快——因为它无需在服务器端执行任何代码。同时，这还大大地减轻了服务器的压力。</p>

<h4>2.高安全性</h4>

<p>  基于与上述相同的理由，静态页面有着与生俱来的安全性。不像WordPress或者其他任何动态的框架，静态站点本身并不存在安全漏洞的问题。</p>

<h4>3.版本控制</h4>

<p>  你无需通过WordPress来维护一整个复杂的数据库——静态站点的内容完全仅由文件系统中独立的目录和文件构成，这意味着你不但可以使用Shell、grep、sed、awk这些传统的Unix工具对它们执行操作和维护，更可以使用 Git 这样的分布式版本控制系统来管理它们，并且享受版本控制所带来的一切好处，如同维护任何软件项目的源代码库一样。你甚至可以重新生成以前任意时间点的整个网站！</p>

<h4>4.简单部署</h4>

<p>  一旦静态网站生成以后，任何Web服务器都能够轻易地部署静态站点，而无须在服务器端安装配置其他任何多余的东西。你所需要做的仅仅是通过git、rsync甚至ftp简单地上传文件到你的托管服务器。相比之下，WordPress博客的维护显得复杂得多，你可能需要在你的开发服务器和托管服务器上安装、配置一整套LAMP+WordPress平台，并经常性地升级版本和维护。这是个繁重的技术活。</p>

<h4>5.文本编辑器和自由格式书写</h4>

<p>  也许你不这么认为，但是作为一个hacker而言，在浏览器中一个300x300的文本区里码字写博客并非一件很酷的事情——如果你使用Jekyll这样的静态网站生成器，你就可以用你喜欢的任何文本编辑器（vi、emacs……），用你习惯的标记语言以书写文本文件的方式来直接写博客文章（就好像你平常写代码一样），避免了使用那些简陋和功能有限的Web界面。</p>

<h3>搭建本地Jekyll环境</h3>

<p>我本地的操作系统是windows 7 64位系统。早前我没有搭建本地环境，所以每一次修改都需要提交到<a href="http://github.com" title="Github">Github</a> 上面才能查看修改效果，非常不方便。所以搭建了一个本地环境。</p>

<p><a href="http://jekyllrb.com/docs/installation/">官方文档</a>中指出了可以在Linux, Unix, 和 Mac OS X中安装Jekyll。虽然不支持windows，但是在下方给出了在windows中的解决方案。<a href="http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html">Running Jekyll on windows</a>。</p>

<h4>1.下载RubyInstaller。我选择的是Ruby 2.0.0-p451 (x64)</h4>

<p>【错误1】按照Ruby时路径错误<br/>
在安装Ruby的时候，我的出现了一个安装问题。我安装在了D:\Program Files目录。注意这里有一个空格哟，Ruby安装不成功的。但是我想不明白，明明在C盘下面就一个C:\Program Files的嘛。为什么win7安装目录会有一个空格呢？</p>

<p>【解决1】修改路径名<br/>
将带空格的路径改为不带空格就行了呗。</p>

<h4>2.安装Ruby DEVELOPMENT KIT。我选择的是For use with Ruby 2.0 (x64 – 64bits only)</h4>

<p>【错误2】配置Ruby DEVELOPMENT KIT出错。<br/>
按照上面给出的windows解决方案中，会执行一下<code>ruby dk.rb init</code>，然后可以在devkit中找到一个config.fml文件。</p>

<p>【解决2】修改config.fml文件<br/>
修改文件如下:</p>

<pre><code># This configuration file contains the absolute path locations of all  
# installed Rubies to be enhanced to work with the DevKit. This config  
# file is generated by the 'ruby dk.rb init' step and may be modified  
# before running the 'ruby dk.rb install' step. To include any installed  
# Rubies that were not automagically discovered, simply add a line below  
# the triple hyphens with the absolute path to the Ruby root directory.  
#  
# Example:  
#  
# ---  
# - C:/ruby19trunk  
# - C:/ruby192dev  
#  
---  
- D:/ProgramFiles/Ruby200-x64  
</code></pre>

<p><strong>说明：</strong></p>

<ol>
<li><code>#</code>表示注释。</li>
<li>一定要保留"-"</li>
<li>在下面填写你本地Ruby的安装目录</li>
<li><code>ruby dk.rb init</code> 的时候如果提示"Initialization complete!"。表示成功了。</li>
<li>执行成功后，继续执行<code>ruby dk.rb review</code>和 <code>ruby dk.rb install</code></li>
</ol>


<h4>3.安装Jekyll</h4>

<p>当Ruby环境配置完成后（不提示任何错误），就可以安装Jekyll了。执行<code>gem jekyll install</code><br/>
【错误3】安装Jekyll 时候出错。</p>

<pre><code>ERROR:  Could not find a valid gem 'jekyll' (&gt;= 0) in any repository  
ERROR:  Possible alternatives: jekyll`   
</code></pre>

<p>【解决3】<a href="https://github.com/jekyll/jekyll/issues/1409">Github jekyll</a>中有解决方案</p>

<pre><code>$ gem sources --remove http://rubygems.org/
$ gem sources -a http://ruby.taobao.org/
$ gem sources -l
*** CURRENT SOURCES ***
http://ruby.taobao.org    
$ gem install rack 
</code></pre>

<p>然后继续执行<code>gem install jekyll</code>即可。等待片刻，会提示21 gems installed。jekyll 安装完毕。</p>

<h4>4.创建blog</h4>

<p>在随便一个磁盘下面创建一个文件夹myblog即可</p>

<pre><code>G:\work&gt;jekyll new myblog
G:\work&gt;jekyll serve
</code></pre>

<p>【错误4】<code>invalid byte sequence in GBK</code><br/>
注意，我这里是在work目录下启动的jekyll哦。这也是出现问题的一个原因了。。囧。<br/>
错误如下：</p>

<pre><code>Configuration file: none  
        Source: G:/work  
   Destination: G:/work/_site  
  Generating... Error reading file G:/work/web/github-    pages/siberiawolf.gith  
ub.io/_posts/blog/2012-02-22-github-pages.md: invalid byte sequence in GBK  
error: invalid byte sequence in GBK. Use --trace to view backtrace  
</code></pre>

<p>【解决4】这个问题解决的让我比较纠结。全都记录下来吧。<br/>
<strong>解决方法1</strong><br/>
根据<a href="http://www.cnblogs.com/aleda/articles/Jekyll-in-Windows-following-Chinese-encoding-problem-solutions.html">Jekyll在Windows下面中文编码问题解决方案</a>这里的解决方案，我全都找了一遍，但是依然没有解决。
首先在我<code>convertible.rb</code>文件中，根本就没有文章中提到的那段添加<code>utf-8</code>的代码。
最后这个文章中提到的编码格式、换行符、YAML格式，我这里都没有问题。</p>

<p><strong>解决方法2</strong><br/>
最后我只是简单的将出现GBK错误的文件删掉了。这里出现错误的原因是因为在我的G盘下面，存在的一个文件被Jekyll检测到了。而问题的根本原因是，我启动<code>jekyll serve</code>的时候，是在work目录下进行的，而不是在myblog这个目录下。Jekyll将work目录下的所有文件都遍历了一遍。</p>

<p>【错误5】<code>Forbidden   no access permission to /</code><br/>
这个错误是跟上面错误相关联的。<br/>
<strong>解决方法1</strong><br/>
google找到到stackoverflow中的一篇<a href="http://stackoverflow.com/questions/17364028/jekyll-on-windows-pygments-not-working">问答</a>，试着修改一下 Pygments.rb。但是我不确定他的版本是多少。
结果发现我的版本是0.5.4，然后按照里面提供的方法，将0.5.4卸载掉，安装0.5.0,然后重新启动服务，打开浏览器访问，发现，还是会出现这个Forbidden ..</p>

<p><strong>解决方法2</strong><br/>
进入到myblog(我创建的jekyll目录)，在这个目录下试着启动jekyll serve，然后用浏览器访问就不会出现forbidden了。。囧.....
然后【错误4】也就解决了。</p>

<p>【错误6】页面空白<br/>
页面虽然能访问了，但是一片空白啊，什么都没有</p>

<p>【解决6】删掉highlight代码<br/>
在Jekyll new myblog的时候，在_post目录下生成的文件中，找到如下代码，然后删除掉。</p>

<p><strong>最后成功启动Jekyll 的界面如下</strong>：
<img src="http://siberiawolf.qiniudn.com/images/githubpages/jekyll-ok.jpg" alt="Jekyll ok" /></p>

<h4>5.代码高亮</h4>

<p>【错误7】Conversion error: There was an error converting..<br/>
就是在md文件中存在Ruby代码<code>$ cd ~/.ssh</code>。而这段代码应该是通过高亮的方式显示的。</p>

<p>【解决7】使用Markdown rdiscount<br/>
这个博客使用的是<a href="https://code.google.com/p/google-code-prettify/">Google Code Prettify</a>代码高亮。我本地的是使用方法没有问题，但是为什么会不支持代码高亮呢？
对比发现我的<em>config.yml文件markdown属性不是rdiscount，默认生成的</em>config.yml文件是redcarpet 。然后我就将这个值修改为rdiscount，但是报错。</p>

<pre><code>ERROR: YOUR SITE COULD NOT BE BUILT:------------------------------------Missing dependency: rdiscount
</code></pre>

<p>根据提示，我执行命令<code>$ gem install rdiscount</code>，但是我这里一直安装不上。
<img src="http://siberiawolf.qiniudn.com/images/githubpages/jekyll-makdown-rdiscount.jpg" alt="jekyll-makdown-rdiscount" /></p>

<p>偶然间，我修改了一下<strong>控制面板</strong>中的<strong>区域语言</strong>中的格式修改为<strong>英语（美国）</strong>，然后在执行<code>$ gem install rdiscount</code>，居然成功了。
<img src="http://siberiawolf.qiniudn.com/images/githubpages/jekyll-language.jpg" alt="jekyll-language" />
<img src="http://siberiawolf.qiniudn.com/images/githubpages/jekyll-gem-suc.jpg" alt="jekyll-gem-suc" /></p>

<p>提示gem安装成功。然后代码也就高亮了。而且也不会出现那个Conversion error了。</p>

<p>以下资源解决了我不少困惑：</p>

<ol>
<li><a href="http://davidajowi.com/posts/getting-my-site-running-with-markdown-and-jekyll.html">Getting My Site Running With Markdown + Jekyll!</a></li>
<li><a href="http://blog.evercoding.net/2013/02/27/highlight-code-with-google-code-prettify/">Jekyll中使用google-code-prettify高亮代码</a></li>
</ol>


<h4>6.解决中文编码</h4>

<p>上面提到过，出现了GBK问题。而且我也没有找到convertible.rb文件中的那段代码。那么怎么支持中文呢？
实际上最新版本的Jekyll已经解决了这个问题。只是不再这里处理了。而是在_config.fml文件中配置一下即可。</p>

<pre><code>encoding: utf-8
markdown: rdiscount
</code></pre>

<h2>学习Jekyll Liquid模板语言</h2>

<p><a href="http://jekyllrb.com/" title="Jekyll">Jekyll</a>使用<a href="https://github.com/shopify/liquid/wiki/liquid-for-designers" title="Liquid模板语言">Liquid模板语言</a>，使用Github Pages建独立博客（二）表示文章标题，表示文章内容，更多模板变量请参考官方文档。</p>

<p>需要用到什么语法，直接看文档就行了。</p>

<h2>总结</h2>

<p>记录我自己搭建这个博客的过程、遇到的问题。</p>

        <div id="disqus_container">
            <a href="javascript:void(0);" onclick="toggleDuoshuoComments('#comment-box', '使用Github Pages建独立博客（二）', 'http://siberiawolf.com//github-pages');">点击查看评论</a>
            <div id="comment-box"></div>
        </div>        
    </div>
    <!-- 文章内容 end -->

    <!-- 微博关注 start -->
    <div class="sidenav">

        <iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=2313100327&verifier=d53cef72&dpc=1"></iframe>
    </div>
    <!-- 微博关注 end -->

    <!-- 文章目录 start -->
    <div class="sidenav">
        <h2>技术</h2>
        <ul class="artical-list">
        
            <li><a href="/personal-technology-growth">WEB前端开发资料索引</a></li>
        
            <li><a href="/zepto">Zepto.js使用</a></li>
        
            <li><a href="/mongodb-simple-crud">mongodb简单CRUD</a></li>
        
            <li><a href="/github-pages">使用Github Pages建独立博客（二）</a></li>
        
            <li><a href="/beiyuu-github-pages">使用Github Pages建独立博客（一）</a></li>
        
        </ul>
        
        <h2>生活</h2>
        <ul class="artical-list">
        
            <li><a href="/snowboarding-course">单板滑雪教程</a></li>
        
        </ul>

        <h2>项目</h2>
        <ul class="artical-list">
            <li><a href="/free_programming/index.html">免费的编程中文书籍索引</a></li>
            <li><a href="/frontend_knowledge/index.html">前端知识结构图</a></li>
        </ul>
    </div>
    <!-- 文章目录 end -->
	
	<!-- jd推广 start -->
	
    <div class="sidenav">
        <script type="text/javascript">var jd_union_pid="220524209";var jd_union_euid="";</script>
        <script type="text/javascript" src="http://ads.union.jd.com/static/js/union.js"></script>        
    </div>
    
    <!-- jd推广 end -->
</div>
<div id="footer">
    <p>
        <a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备14051142号</a>，版权所有 © 2014 
        <a href="http://siberiawolf.com/" target="_blank">Siberiawolf的小窝</a>。
        感谢<a href="https://pages.github.com/" target="_blank">GitHub Pages</a>开源技术。
        感谢<a href="https://portal.qiniu.com/signup?code=3l8fij4ieuvrm" target="_blank">七牛云存储</a>提供静态资源空间。
        本站代码地址在<a href="https://github.com/siberiawolf/siberiawolf.github.io" target="_blank">这里</a>
    </p>
</div>
<script src="http://libs.baidu.com/jquery/1.7.1/jquery.min.js"></script>
<!-- 多说公共JS代码 start -->
<script>var duoshuoQuery = {short_name:"siberiawolf"};</script>
<script src="http://static.duoshuo.com/embed.js"></script>
<script type="text/javascript">
function toggleDuoshuoComments(container, id, url){
  if(jQuery(container).has("div").length>0){
    jQuery(container).empty();
    return;
  }
  var el = document.createElement('div');
  el.setAttribute('data-thread-key', id);
  el.setAttribute('data-url', url);
  DUOSHUO.EmbedThread(el);
  jQuery(container).append(el);
}
</script>
<!-- 多说公共JS代码 end -->


    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){        // 左侧悬浮点击      
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').hide();
                }else{
                    $('.home-contact').show();
                }
            });
        });
    </script>
    <!-- 百度统计代码 start -->
    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1248d51f06841e8dda82405c280d6597' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <!-- 百度统计代码 end -->
</body>
</html>
